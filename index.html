<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Для тебя ✨</title>
    <style>
        :root { --bg-color: #fdf2f8; --card-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: var(--bg-color); font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        .card-container { position: relative; width: 320px; height: 480px; background: #fff; border-radius: 24px; box-shadow: var(--card-shadow); user-select: none; -webkit-user-select: none; }
        #certificate { width: 100%; height: 100%; object-fit: cover; border-radius: 24px; }
        #scratch-canvas { position: absolute; top: 0; left: 0; border-radius: 24px; cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="%23000" d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75l1.84-1.83Z"/></svg>'), auto; touch-action: none; }
        .instruction { position: absolute; bottom: -40px; width: 100%; text-align: center; color: #9d174d; font-size: 14px; font-weight: 500; opacity: 0.8; }
    </style>
</head>
<body>
    <div class="card-container">
        <img id="certificate" src="gift.jpg" alt="Сюрприз">
        <canvas id="scratch-canvas"></canvas>
        <div class="instruction">сотри защитный слой пальцем ✨</div>
    </div>

<script>
    const canvas = document.getElementById('scratch-canvas');
    const ctx = canvas.getContext('2d');
    const container = document.querySelector('.card-container');

    canvas.width = 320;
    canvas.height = 480;

    // Создаем красивый градиент для верхнего слоя
    const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
    gradient.addColorStop(0, '#e2e8f0');
    gradient.addColorStop(0.5, '#cbd5e1');
    gradient.addColorStop(1, '#94a3b8');

    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Добавляем текстуру (точечки), чтобы слой выглядел интереснее
    for (let i = 0; i < 500; i++) {
        ctx.fillStyle = 'rgba(255,255,255,0.2)';
        ctx.beginPath();
        ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, 1, 0, Math.PI * 2);
        ctx.fill();
    }

    ctx.fillStyle = '#475569';
    ctx.font = '600 18px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('ТВОЙ ПОДАРОК ЗДЕСЬ', 160, 240);

    let isDrawing = false;

    function getCoords(e) {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        return {
            x: clientX - rect.left,
            y: clientY - rect.top
        };
    }

    function scratch(e) {
        if (!isDrawing) return;
        const {x, y} = getCoords(e);
        ctx.globalCompositeOperation = 'destination-out';
        ctx.beginPath();
        ctx.arc(x, y, 35, 0, Math.PI * 2);
        ctx.fill();
    }

    canvas.addEventListener('mousedown', () => isDrawing = true);
    canvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); });
    window.addEventListener('mouseup', () => isDrawing = false);
    window.addEventListener('touchend', () => isDrawing = false);
    canvas.addEventListener('mousemove', scratch);
    canvas.addEventListener('touchmove', (e) => { e.preventDefault(); scratch(e); }, { passive: false });
</script>
</body>
</html>

